{% load static %}
{% include 'lolapp/header.html' %}
<link rel="stylesheet" href="{% static 'header.css' %}">
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìˆœìœ„ë³´ê¸°</title>
    <style>
        body { background: #23232b; font-family: 'Segoe UI', Arial, sans-serif; color: #e0e0e0; }
        .container { max-width: 950px; margin: 40px auto; background: #23232b; border-radius: 10px; padding: 24px; }
        .tab-menu { display: flex; gap: 8px; margin-bottom: 18px; }
        .tab-btn { padding: 8px 18px; border: none; border-radius: 6px 6px 0 0; background: #e3eaf6; color: #1976d2; font-weight: 500; cursor: pointer; }
        .tab-btn.active { background: #23232b; color: #fff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .section-title { font-size: 1.2em; margin: 24px 0 12px 0; color: #90caf9; }
        table { width: 100%; border-collapse: collapse; margin-top: 12px; }
        th, td { border: 1px solid #444; padding: 8px 4px; text-align: center; }
        th { background: #1976d2; color: #fff; }
        .line-filter { margin-bottom: 12px; }
        .line-btn { padding: 4px 12px; margin-right: 6px; border: none; border-radius: 4px; background: #444; color: #fff; cursor: pointer; }
        .line-btn.active { background: #1976d2; }
        .champion-img { width: 32px; height: 32px; border-radius: 50%; vertical-align: middle; margin-right: 8px; }
        .user-card { display: flex; align-items: center; background: #32323e; border-radius: 8px; padding: 10px 16px; margin-bottom: 8px; }
        .user-rank { width: 32px; font-weight: bold; color: #90caf9; }
        .user-name { flex: 1; font-weight: bold; }
        .user-score { color: #ffd600; font-weight: bold; }
        .vs-table { width: 100%; border-collapse: separate; border-spacing: 0 8px; }
        .vs-table th, .vs-table td { border: none; background: #32323e; padding: 12px 8px; }
        .vs-table th { color: #90caf9; font-size: 1em; }
        .vs-table .win { color: #81c784; font-weight: bold; }
        .vs-table .lose { color: #ef5350; font-weight: bold; }
        .kda-score { color: #4caf50; font-weight: bold; margin-left: 8px; }
        .death { color: #ef5350; font-weight: bold; }
        .vs-table .win, .vs-table .win * { color: #81c784 !important; font-weight: bold; }
        .vs-table .lose, .vs-table .lose * { color: #ef5350 !important; font-weight: bold; }
        .kda-score { margin-left: 8px; }
        .vs-table td { font-size: 1.05em; }
    </style>
    <script>
        function showTab(idx) {
            document.querySelectorAll('.tab-btn').forEach((btn, i) => btn.classList.toggle('active', i===idx));
            document.querySelectorAll('.tab-content').forEach((tab, i) => tab.classList.toggle('active', i===idx));
        }
        function filterLine(tabIdx, line) {
            document.querySelectorAll('.tab-content')[tabIdx].querySelectorAll('.line-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.line === line));
            document.querySelectorAll('.tab-content')[tabIdx].querySelectorAll('.line-row').forEach(row => {
                row.style.display = (line === 'all' || row.dataset.line === line) ? '' : 'none';
            });
        }
        window.onload = function() { showTab(0); };
    </script>
</head>
<body>
    <div class="container">
        <div class="tab-menu">
            <button class="tab-btn" onclick="showTab(0)">ìˆœìœ„í‘œğŸ¥‡ğŸ¥ˆğŸ¥‰</button>
            <button class="tab-btn" onclick="showTab(1)">ì±”í”¼ì–¸ë³„ ìŠ¹ë¥ ğŸš©</button>
            <button class="tab-btn" onclick="showTab(2)">ë¼ì¸ë³„ ìˆœìœ„í‘œğŸ”¥</button>
            <button class="tab-btn" onclick="showTab(3)">userë³„ ìƒëŒ€ì „ì ğŸ¥ŠğŸ¥Š</button>
        </div>
        <!-- 1. ìˆœìœ„í‘œ -->
        <div class="tab-content active">
            <div class="section-title">ìœ ì € ìˆœìœ„í‘œ</div>
            <table>
                <tr>
                    <th>ìˆœìœ„</th><th>ìœ ì €</th><th>íŒìˆ˜</th><th>ìŠ¹</th><th>íŒ¨</th><th>ìŠ¹ë¥ </th><th>KDAí‰ê· </th><th>CSí‰ê· </th><th>ë°ë¯¸ì§€í‰ê· </th><th>í‰ê· Rankì ìˆ˜</th>
                </tr>
                {% for user in real_user_stats %}
                    <tr
                      {% if forloop.counter == 1 %}
                        style="background:#ffd700; font-weight:bold; color:#000;"
                      {% elif forloop.counter == 2 %}
                        style="background:#c0c0c0; font-weight:bold; color:#000;"
                      {% elif forloop.counter == 3 %}
                        style="background:#cd7f32; font-weight:bold; color:#000;"
                      {% endif %}
                    >
                      <td style="text-align:left; width:auto;">
                        <span style="display:inline-block; min-width:48px;">
                          {{ forloop.counter }}
                          {% if forloop.counter == 1 %} <span style="margin-left:2px;">ğŸ¥‡</span>
                          {% elif forloop.counter == 2 %} <span style="margin-left:2px;">ğŸ¥ˆ</span>
                          {% elif forloop.counter == 3 %} <span style="margin-left:2px;">ğŸ¥‰</span>
                          {% elif forloop.last %} <span style="margin-left:2px;">ğŸ’©</span>
                          {% endif %}
                        </span>
                      </td>
                      <td>{{ user.name }}</td>
                      <td>{{ user.total }}</td>
                      <td>{{ user.win }}</td>
                      <td>{{ user.lose }}</td>
                      <td>{{ user.winrate }}%</td>
                      <td>{{ user.kda }}</td>
                      <td>{{ user.cs_avg }}</td>
                      <td>{{ user.dmg_avg }}</td>
                      <td>{{ user.avg_rank_score }}</td>
                    </tr>
                {% empty %}
                <tr><td colspan="10">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
                {% endfor %}
            </table>
        </div>
        <!-- 2. ì±”í”¼ì–¸ë³„ ìŠ¹ë¥  -->
        <div class="tab-content">
            <div class="section-title">ì±”í”¼ì–¸ë³„ ìŠ¹ë¥ ğŸš©</div>
            <div class="line-filter">
                <button class="line-btn active" data-line="all" onclick="filterLine(1, 'all')">ì „ì²´</button>
                <button class="line-btn" data-line="top" onclick="filterLine(1, 'top')">íƒ‘</button>
                <button class="line-btn" data-line="jungle" onclick="filterLine(1, 'jungle')">ì •ê¸€</button>
                <button class="line-btn" data-line="mid" onclick="filterLine(1, 'mid')">ë¯¸ë“œ</button>
                <button class="line-btn" data-line="adc" onclick="filterLine(1, 'adc')">ì›ë”œ</button>
                <button class="line-btn" data-line="support" onclick="filterLine(1, 'support')">ì„œí¿</button>
            </div>
            <table>
                <tr>
                    <th>ì±”í”¼ì–¸</th><th>ë¼ì¸</th><th>íŒìˆ˜</th><th>ìŠ¹</th><th>íŒ¨</th><th>ìŠ¹ë¥ </th><th>KDA</th>
                </tr>
                {% for champ in champ_stats %}
                <tr class="line-row" data-line="{{ champ.line }}">
                    <td><img src="{% static 'img/' %}{{ champ.champion_img }}.png" class="champion-img">{{ champ.champion }}</td>
                    <td>{{ champ.line }}</td>
                    <td>{{ champ.games }}</td>
                    <td>{{ champ.win }}</td>
                    <td>{{ champ.lose }}</td>
                    <td>{{ champ.winrate }}%</td>
                    <td>{{ champ.kda }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="7">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
                {% endfor %}
            </table>
        </div>
        <!-- 3. ë¼ì¸ë³„ ìˆœìœ„í‘œ -->
        <div class="tab-content">
            <div class="section-title">ë¼ì¸ë³„ ìˆœìœ„í‘œğŸ¥‡ğŸ¥ˆğŸ¥‰</div>
            <div class="line-filter">
                <button class="line-btn active" data-line="all" onclick="filterLine(2, 'all')">ì „ì²´</button>
                <button class="line-btn" data-line="top" onclick="filterLine(2, 'top')">íƒ‘</button>
                <button class="line-btn" data-line="jungle" onclick="filterLine(2, 'jungle')">ì •ê¸€</button>
                <button class="line-btn" data-line="mid" onclick="filterLine(2, 'mid')">ë¯¸ë“œ</button>
                <button class="line-btn" data-line="adc" onclick="filterLine(2, 'adc')">ì›ë”œ</button>
                <button class="line-btn" data-line="support" onclick="filterLine(2, 'support')">ì„œí¿</button>
            </div>
            <table>
                <tr>
                    <th>ìˆœìœ„</th><th>ìœ ì €</th><th>ë¼ì¸</th><th>íŒìˆ˜</th><th>ìŠ¹</th><th>íŒ¨</th><th>ìŠ¹ë¥ </th><th>KDAí‰ê· </th><th>CSí‰ê· </th><th>ë°ë¯¸ì§€í‰ê· </th><th>Rankì ìˆ˜</th>
                </tr>
                {% for user in line_user_stats %}
                <tr class="line-row" data-line="{{ user.line }}">
                    <td>{{ forloop.counter }}</td>
                    <td>{{ user.name }}</td>
                    <td>{{ user.line }}</td>
                    <td>{{ user.total }}</td>
                    <td>{{ user.win }}</td>
                    <td>{{ user.lose }}</td>
                    <td>{{ user.winrate }}%</td>
                    <td>{{ user.kda }}</td>
                    <td>{{ user.cs_avg }}</td>
                    <td>{{ user.dmg_avg }}</td>
                    <td>{{ user.rank_score }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="11">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
                {% endfor %}
            </table>
        </div>
        <!-- 4. userë³„ ìƒëŒ€ì „ì  -->
        <div class="tab-content">
            <div class="section-title">ìœ ì €ë³„ ìƒëŒ€ì „ì ğŸ¥Š</div>
            <div class="line-filter">
                <button class="line-btn active" data-line="all" onclick="filterLine(3, 'all')">ì „ì²´</button>
                <button class="line-btn" data-line="top" onclick="filterLine(3, 'top')">íƒ‘</button>
                <button class="line-btn" data-line="jungle" onclick="filterLine(3, 'jungle')">ì •ê¸€</button>
                <button class="line-btn" data-line="mid" onclick="filterLine(3, 'mid')">ë¯¸ë“œ</button>
                <button class="line-btn" data-line="adc" onclick="filterLine(3, 'adc')">ì›ë”œ</button>
                <button class="line-btn" data-line="support" onclick="filterLine(3, 'support')">ì„œí¿</button>
            </div>
            <table class="vs-table">
                <tr>
                    <th>ìš°ì„¸ğŸ˜€</th><th>ì—´ì„¸ğŸ˜­</th>
                </tr>
                {% for line, vs_list in vs_stats.items %}
                    {% for pair in vs_list %}
                        <tr class="line-row" data-line="{{ line }}">
                            <td class="win">
                                <div style="font-size:1.1em;">{{ pair.0.name }}</div>
                                <div>{{ pair.0.k_sum }} / {{ pair.0.d_sum }} / {{ pair.0.a_sum }}</div>
                                <div class="kda-score">í‰ì  {{ pair.0.kda }}</div>
                                <div style="font-size:0.95em;">ìŠ¹ë¥ : {{ pair.0.winrate }}%</div>
                            </td>
                            <td class="lose">
                                <div style="font-size:1.1em;">{{ pair.1.name }}</div>
                                <div>{{ pair.1.k_sum }} / {{ pair.1.d_sum }} / {{ pair.1.a_sum }}</div>
                                <div class="kda-score">í‰ì  {{ pair.1.kda }}</div>
                                <div style="font-size:0.95em;">ìŠ¹ë¥ : {{ pair.1.winrate }}%</div>
                            </td>
                        </tr>
                    {% endfor %}
                {% endfor %}
            </table>
        </div>
    </div>
</body>
</html> 